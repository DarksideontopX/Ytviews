<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YT View Booster</title>
  <style>
    body {
      background: #0f0f0f;
      color: #fff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    .glow {
      text-shadow: 0 0 10px #f00, 0 0 20px #f00;
    }
    header {
      text-align: center;
      padding: 20px;
      background: #1a1a1a;
      box-shadow: 0 0 10px red;
    }
    .container {
      padding: 20px;
      text-align: center;
    }
    input, button, select {
      padding: 10px;
      margin: 10px;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
    }
    button {
      background: red;
      color: #fff;
      cursor: pointer;
      box-shadow: 0 0 10px red;
    }
    .admin-panel {
      border-top: 1px solid #333;
      margin-top: 30px;
      padding-top: 20px;
    }
    .video-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 10px;
    }
    iframe {
      width: 100%;
      height: 200px;
    }
  </style>
</head>
<body>
  <header>
    <h1 class="glow">YT VIEW BOOSTER</h1>
    <p>MADE BY DARKSIDE | <a href="https://t.me/Killingchildrenforfun" style="color:red">BUY KEY ðŸ”‘</a></p>
  </header>

  <div class="container" id="login-section">
    <h2>Login</h2>
    <input type="text" id="keyInput" placeholder="Enter your key" />
    <button onclick="login()">Login</button>
  </div>

  <div class="container" id="booster-section" style="display:none">
    <h2>YT Booster</h2>
    <input type="text" id="ytlink" placeholder="Enter YouTube Link" />
    <input type="number" id="views" placeholder="VIEWS AMOUNT [MAX 2000]" max="2000" />
    <button onclick="boostViews()">Boost Views</button>
    <div class="video-grid" id="videoContainer"></div>
  </div>

  <div class="container admin-panel" id="admin-section" style="display:none">
    <h2>Admin Panel</h2>
    <input type="text" id="newKey" placeholder="New Key" />
    <input type="number" id="days" placeholder="Expiry in Days" />
    <input type="number" id="maxDevices" placeholder="Max Devices" />
    <button onclick="addKey()">Add Key</button>
    <input type="text" id="delKey" placeholder="Key to Delete" />
    <button onclick="deleteKey()">Delete Key</button>
  </div>

  <script>
    const mongoApi = "https://api.mongodbservice.com/keys"; // Replace with your actual serverless function URL
    const adminKey = "RUDRAPAWAR";

    async function login() {
      const key = document.getElementById("keyInput").value.trim();
      if (key === adminKey) {
        document.getElementById("login-section").style.display = "none";
        document.getElementById("booster-section").style.display = "block";
        document.getElementById("admin-section").style.display = "block";
        return;
      }
      const res = await fetch(`${mongoApi}/verify?key=${key}`);
      const data = await res.json();
      if (data.valid) {
        document.getElementById("login-section").style.display = "none";
        document.getElementById("booster-section").style.display = "block";
      } else {
        alert("Invalid or expired key");
      }
    }

    async function addKey() {
      const key = document.getElementById("newKey").value.trim();
      const days = parseInt(document.getElementById("days").value);
      const devices = parseInt(document.getElementById("maxDevices").value);
      const res = await fetch(`${mongoApi}/add`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ key, days, maxDevices: devices })
      });
      alert("Key added!");
    }

    async function deleteKey() {
      const key = document.getElementById("delKey").value.trim();
      await fetch(`${mongoApi}/delete?key=${key}`, { method: 'DELETE' });
      alert("Key deleted");
    }

    function boostViews() {
      const url = document.getElementById("ytlink").value.trim();
      const count = parseInt(document.getElementById("views").value);
      const videoContainer = document.getElementById("videoContainer");
      videoContainer.innerHTML = "";
      for (let i = 0; i < count && i < 2000; i++) {
        const iframe = document.createElement("iframe");
        iframe.src = convertYT(url);
        iframe.allow = "autoplay";
        videoContainer.appendChild(iframe);
      }
    }

    function convertYT(link) {
      if (link.includes("shorts/")) {
        return link.replace("shorts/", "embed/").split("?")[0];
      } else if (link.includes("watch?v=")) {
        return link.replace("watch?v=", "embed/").split("&")[0];
      } else {
        return link;
      }
    }
  </script>
</body>
</html>
